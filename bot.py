from telethon import TelegramClient, events
from telethon.errors import SessionPasswordNeededError

api_id = 23246373
api_hash = 'daa39e9d5b1bc1261b0c3e27853205fc'

keywords = ['–º–æ–Ω—Ç–∞–∂', '–º–æ–Ω—Ç–∞–∂–µ—Ä', '–º–æ–Ω—Ç–∞–∂—ë—Ä', '–º–æ–Ω—Ç–∞–∂—ë—Ä']
exclude_words = ['–≤–∞–∫–∞–Ω—Å–∏—è', '–∏—â—É', '–∏—â–µ–º', '—Ä–µ–∑—é–º–µ']
target_chat_id = -4734945370

client = TelegramClient('my_session', api_id, api_hash)

@client.on(events.NewMessage)
async def handler(event):
    message_text = event.raw_text.lower()
    if any(word in message_text for word in keywords) and not any(exclude in message_text for exclude in exclude_words):
        await client.send_message(target_chat_id, f'–°–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ {event.chat.title}:')

{event.raw_text}')

async def main():
    await client.connect()
    if not await client.is_user_authorized():
        phone = input("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–≤ —Ñ–æ—Ä–º–∞—Ç–µ +7...): ")
        await client.send_code_request(phone)
        code = input("–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ Telegram: ")
        try:
            await client.sign_in(phone, code)
        except SessionPasswordNeededError:
            password = input("üîê –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –æ—Ç –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: ")
            await client.sign_in(password=password)

    print("‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω. –û–∂–∏–¥–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è...")
    await client.run_until_disconnected()

client.loop.run_until_complete(main())
